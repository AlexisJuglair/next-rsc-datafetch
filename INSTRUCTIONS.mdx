# Formulaire, validation (client)

### 💡 Formulaire et Validation

## 📝 Tes notes

Détaille ce que tu as appris ici, sur une page [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

`React Hook Form` est une librairie très répandue pour gérer les formulaires en `React`. Elle offre une manière simple, performante et extensible de gérer les formulaires dans les applications `React`. `React` `Hook Form` exploite les hooks de `React` pour fournir une API intuitive qui facilite la gestion des formulaires, la validation des champs, et le contrôle des données soumises, tout en optimisant les performances grâce à une réduction du nombre de rendus inutiles.

### **Avantages de `React` `Hook Form`**

1. **Performance** : `React` `Hook Form` minimise les rendus inutiles, garantissant des performances optimales même pour les formulaires complexes.
2. **Facilité d'utilisation** : Avec son API intuitive et ses hooks, la mise en place et la gestion des formulaires deviennent simples et déclaratives.
3. **Validation flexible** : Elle prend en charge la validation native du navigateur et s'intègre facilement avec des bibliothèques tierces comme `Yup` et `Zod` .
4. **Gestion des erreurs** : La bibliothèque fournit des outils pour gérer les erreurs et offrir des retours immédiats aux utilisateurs.
5. **Support des formulaires complexes** : `React` `Hook Form` gère efficacement les formulaires dynamiques, imbriqués et répétitifs avec des hooks comme **`useFieldArray`**.

`React Hook Form` s’intègre parfaitement avec `zod`

- [https://react-hook-form.com/docs/useform](https://react-hook-form.com/docs/useform)

`Shadcn` propose un composant `<Form>` préconfiguré avec `React Hook Form`.

- [https://ui.shadcn.com/docs/components/form](https://ui.shadcn.com/docs/components/form)

```tsx
import { z } from "zod"

const formSchema = z.object({
  username: z.string().min(2).max(50),
})

 const form = useForm<Product>({
     resolver: zodResolver(formSchema),
     ...
```

📑 Le lien vers la doc [https://www.react-hook-form.com/api/](https://www.react-hook-form.com/api/)

<aside>
💡 Cette validation est faite côté client

</aside>

## Exercice

Dans cet exercice, nous avons préparé le terrain dans le dossier `exercise/shop-admin`.

Il a y une liste de produits qui s’affiche dans un tableau `shadcn` et un formulaire.

- page → products-management → react-hook-form → action

🐶 Dans cet exercice, tu vas devoir :

- Créer un `schéma Zod` pour valider le formulaire, afficher des messages d’erreur avec `React Hook form`.
- Soumettre le formulaire en appelant le serveur Action `await persistProduct(product)`

Fichiers

- `exercise/shop-admin/form/react-hook-form.tsx`

## Bonus

### 1. 🚀 z.infer

Dans notre cas, nous avons un type TS `Product` qui permet de typer le formulaire et un schéma `zod`.

```tsx
useForm<Product>
resolver: zodResolver(formSchema)
```

Nous avons donc 2 définitions de données. Si nous avons besoin de renommer le champ `title` en `product_name` par exemple, il faut modifier 2 définitions de données.

- Heureusement, `Zod` fournit un utilitaire permettant de convertir un schéma en type :

```tsx
const A = z.string()
type A = z.infer<typeof A> // string

const u: A = 12 // TypeError
const u: A = 'asdf' // compiles
```

- [https://zod.dev/?id=type-inference](https://zod.dev/?id=type-inference)

Dans cet exercice, tu vas devoir supprimer le type `Product` du formulaire et utiliser `z.infer` pour créer un type `FormSchemaType` qui sera utilisé dans le formulaire.

Fichiers

- `exercise/shop-admin/form/react-hook-form.tsx`

## Aller plus loin

📑 Le lien vers la doc [https://zod.dev/](https://zod.dev/)

## Ils vont t’aider

- **🐶 Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **🤖 Ash le Robot** : _Ash le Robot te donnera du code utile._
- **🚀 Julia La roquette** : _Julia te donnera des défis supplémentaires._
- **⛏️ Hulk le Marteau** : _Quand du code à supprimer est présent_
- **👨‍✈️ Hugo le chef de projet** : _Va t'aider sur les spécifications du projet_

## 🐜 Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20PRO&entry.1430994900=03.RSC%20Data%20fetch&entry.533578441=07%20Form%20Validation%20client).
